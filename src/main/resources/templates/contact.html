<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Book Appointment - Glow & Glamour</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <nav style="background-color: #d87093; padding: 15px; color: white; display: flex; gap: 20px; align-items: center;">
        <div style="font-weight: bold; font-size: 1.2em;">Glow & Glamour</div>
        <a href="/" style="color: white; text-decoration: none; font-weight: 500;">Home</a>
        <a href="/services" style="color: white; text-decoration: none; font-weight: 500;">Services</a>
        <a href="/contact" style="color: white; text-decoration: underline; font-weight: bold;">Book Now</a>
        
        <div th:if="${isLoggedIn}" style="display: flex; gap: 20px; margin-left: auto; align-items: center;">
            <a th:if="${isAdmin}" href="/bookings" style="color: #8b0000; font-weight: bold; text-decoration: underline;">Manage All Bookings</a>
            <a th:unless="${isAdmin}" href="/bookings" style="color: white; font-weight: bold; text-decoration: underline;">My Bookings</a>
            <span style="color: #ffe4e1;">|</span>
            <span>Hello, <span th:text="${loggedInUser}" style="font-weight: bold;">User</span></span>
            <form action="/logout" method="post" style="margin: 0;">
                <button type="submit" style="background: white; color: #d87093; border: none; padding: 5px 12px; font-weight: bold; cursor: pointer; border-radius: 4px;">Logout</button>
            </form>
        </div>

        <div th:unless="${isLoggedIn}" style="margin-left: auto; display: flex; gap: 15px;">
            <a href="/login" style="color: white; text-decoration: none; font-weight: bold;">Login</a>
            <a href="/register" style="background: white; color: #d87093; padding: 5px 10px; border-radius: 4px; text-decoration: none; font-weight: bold;">Register</a>
        </div>
    </nav>

    <div class="container">
        <div class="form-container" style="margin: 0 auto; padding: 30px;">
            <h1 style="text-align: center; color: #d87093; margin-top: 0;">Book Appointment</h1>
            <p style="text-align: center; color: #666; margin-bottom: 20px;">We can't wait to see you!</p>

            <div th:if="${successMessage}" class="success-msg">
                <p th:text="${successMessage}" style="margin: 0;"></p>
            </div>

            <form action="/submit" method="post">
                <label style="font-weight: bold; color: #555;">Your Name</label>
                <input type="text" name="name" 
                       th:value="${isLoggedIn} ? ${loggedInUser} : ''"
                       placeholder="e.g. Nilam Prajapati" required>
                
                <label style="font-weight: bold; color: #555;">Email Address</label>
                <input type="email" name="email" placeholder="example@gmail.com" required>

                <label style="font-weight: bold; color: #555;">Service Required</label>
                <input type="text" name="serviceName" 
                       th:value="${param.service}" 
                       placeholder="e.g. Facial, Hair Cut..." required>
                
                <label style="font-weight: bold; color: #555;">Appointment Date</label>
                <input type="date" name="date" id="datePicker" required>

                <button type="submit" class="btn" style="width: 100%; background-color: #d87093; margin-top: 10px;">Confirm Booking</button>
            </form>
        </div>
    </div>

    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Mom's Glow & Glamour</h3>
                <p>Relax, Rejuvenate, and Refresh.<br>
                We bring out the best version of you.</p>
            </div>

            <div class="footer-section">
                <h3>Contact Us</h3>
                <p>üìç Shop 12, Sunrise Avenue</p>
                <p>üìû +91 98765-43210</p>
            </div>

            <div class="footer-section">
                <h3>Quick Links</h3>
                <a href="/">Home</a>
                <a href="/services">Services</a>
                <a href="/bookings">My Bookings</a>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2026 Mom's Glow & Glamour. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // 1. Get the current date
        var today = new Date();
        
        // 2. Format it as YYYY-MM-DD (e.g., "2026-01-28")
        var dd = String(today.getDate()).padStart(2, '0');
        var mm = String(today.getMonth() + 1).padStart(2, '0'); // January is 0!
        var yyyy = today.getFullYear();
        today = yyyy + '-' + mm + '-' + dd;

        // 3. Set the 'min' attribute on the date picker
        document.getElementById("datePicker").setAttribute("min", today);
    </script>

</body>
</html>