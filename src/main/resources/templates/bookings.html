<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Manage Bookings</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <nav style="background-color: #d87093; padding: 15px; color: white; display: flex; gap: 20px; align-items: center;">
        
        <div style="font-weight: bold; font-size: 1.2em;">Glow & Glamour</div>

        <a href="/" style="color: white; text-decoration: none; font-weight: 500;">Home</a>
        <a href="/services" style="color: white; text-decoration: none; font-weight: 500;">Services</a>
        <a href="/contact" style="color: white; text-decoration: none; font-weight: 500;">Book Now</a>

        <div th:if="${isLoggedIn}" style="display: flex; gap: 20px; margin-left: auto; align-items: center;">
            <a th:if="${isAdmin}" href="/bookings" style="color: #8b0000; font-weight: bold; text-decoration: underline;">Manage All Bookings</a>
            <a th:unless="${isAdmin}" href="/bookings" style="color: white; font-weight: bold; text-decoration: underline;">My Bookings</a>
            
            <span style="color: #ffe4e1;">|</span>
            <span>Hello, <span th:text="${loggedInUser}" style="font-weight: bold;">User</span></span>
            
            <form action="/logout" method="post" style="margin: 0;">
                <button type="submit" style="background: white; color: #d87093; border: none; padding: 5px 12px; font-weight: bold; cursor: pointer; border-radius: 4px;">Logout</button>
            </form>
        </div>
    </nav>

    <div>
        <h1 style="text-align: center; color: #333; margin-top: 30px;">Current Bookings</h1>
        <p th:if="${isAdmin}" style="text-align:center; color: red;">(Admin Mode: You can see and delete ALL bookings)</p>
    </div>

    <table th:if="${!bookings.isEmpty()}">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Service Required</th> 
                <th>Date</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="booking : ${bookings}">
                <td th:text="${booking.id}">1</td>
                <td th:text="${booking.name}">Jane Doe</td>
                <td th:text="${booking.email}">jane@example.com</td>
                
                <td th:text="${booking.serviceName}">Facial</td> 
                
                <td th:text="${booking.date}">2025-01-20</td>
                <td>
                    <form action="/delete" method="post">
                        <input type="hidden" name="id" th:value="${booking.id}" />
                        <button type="submit" style="background-color: #ff4d4d; color: white; border: none; padding: 6px 12px; cursor: pointer; border-radius: 4px;">Delete</button>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>

    <div th:if="${bookings.isEmpty()}" class="empty-state">
        <p>No appointments found yet! üìÖ</p>
        <a href="/" style="color: #d87093; font-weight: bold;">Go Back to Home</a>
    </div>

    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Mom's Glow & Glamour</h3>
                <p>Relax, Rejuvenate, and Refresh.<br>
                We bring out the best version of you.</p>
            </div>

            <div class="footer-section">
                <h3>Contact Us</h3>
                <p>üìç Shop 12, Sunrise Avenue</p>
                <p>üìû +91 98765-43210</p>
            </div>

            <div class="footer-section">
                <h3>Quick Links</h3>
                <a href="/">Home</a>
                <a href="/services">Services</a>
                <a href="/bookings">My Bookings</a>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2026 Mom's Glow & Glamour. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>