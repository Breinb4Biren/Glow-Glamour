<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Our Services</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <nav style="background-color: #d87093; padding: 15px; color: white; display: flex; gap: 20px; align-items: center;">
        
        <div style="font-weight: bold; font-size: 1.2em;">Glow & Glamour</div>

        <a href="/" style="color: white; text-decoration: none; font-weight: 500;">Home</a>
        <a href="/services" style="color: white; text-decoration: underline; font-weight: bold;">Services</a>
        <a href="/contact" style="color: white; text-decoration: none; font-weight: 500;">Book Now</a>

        <div th:if="${isLoggedIn}" style="display: flex; gap: 20px; margin-left: auto; align-items: center;">
            <a th:if="${isAdmin}" href="/bookings" style="color: #8b0000; font-weight: bold; text-decoration: underline;">Manage All Bookings</a>
            <a th:unless="${isAdmin}" href="/bookings" style="color: white; font-weight: bold; text-decoration: underline;">My Bookings</a>
            
            <span style="color: #ffe4e1;">|</span>
            <span>Hello, <span th:text="${loggedInUser}" style="font-weight: bold;">User</span></span>
            
            <form action="/logout" method="post" style="margin: 0;">
                <button type="submit" style="background: white; color: #d87093; border: none; padding: 5px 12px; font-weight: bold; cursor: pointer; border-radius: 4px;">Logout</button>
            </form>
        </div>

        <div th:unless="${isLoggedIn}" style="margin-left: auto; display: flex; gap: 15px;">
            <a href="/login" style="color: white; text-decoration: none; font-weight: bold;">Login</a>
            <a href="/register" style="background: white; color: #d87093; padding: 5px 10px; border-radius: 4px; text-decoration: none; font-weight: bold;">Register</a>
        </div>
    </nav>

    <div class="container-wide">
        
        <div style="display: flex; justify-content: center; align-items: center; gap: 20px; position: relative;">
            <h1 style="color: #d87093; font-family: 'Playfair Display', serif;">Our Treatments</h1>
            
            <a th:if="${isAdmin}" href="/add-service" 
               style="background-color: #28a745; color: white; padding: 8px 15px; border-radius: 5px; text-decoration: none; font-weight: bold; font-size: 0.9em; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
               + Add Service
            </a>
        </div>

        <p style="text-align:center; color: #777;">Relax, Rejuvenate, and Refresh.</p>

        <div class="service-grid">
            <div th:each="item : ${services}" class="service-card" style="text-align: center;"> 
                
                <img th:if="${item.imageBase64 != null}" 
                     th:src="@{'data:image/jpeg;base64,' + ${item.imageBase64}}" 
                     alt="Service Image"
                     style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px;">

                <img th:unless="${item.imageBase64 != null}" 
                     src="https://via.placeholder.com/300x200?text=No+Image" 
                     alt="Service Image"
                     style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px;">
                
                <h3 th:text="${item.name}">Service Name</h3>
                <p th:text="${item.description}">Description goes here</p>
                <div class="price">
                   ‚Çπ<span th:text="${item.price}">0.00</span>
                </div>

                <div style="margin-top: 15px;">
                     <a th:href="@{/contact(service=${item.name})}" 
                        class="btn" style="display: inline-block; width: auto; padding: 8px 20px;">
                        Book This
                     </a>
                </div>

                <div th:if="${isAdmin}" style="margin-top: 15px; border-top: 1px solid #eee; padding-top: 10px; display: flex; justify-content: center; gap: 10px;">
                    <a th:href="@{/edit-service(id=${item.id})}" 
                       style="background-color: #007bff; color: white; padding: 5px 10px; border-radius: 4px; text-decoration: none; font-size: 0.8em;">
                       Edit
                    </a>

                    <form action="/delete-service" method="post" style="margin: 0;">
                        <input type="hidden" name="id" th:value="${item.id}">
                        <button type="submit" 
                                style="background-color: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 0.8em;"
                                onclick="return confirm('Are you sure you want to delete this service?');">
                            Delete
                        </button>
                    </form>
                </div>

            </div>
        </div>
    </div>

    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Mom's Glow & Glamour</h3>
                <p>Relax, Rejuvenate, and Refresh.<br>
                We bring out the best version of you.</p>
            </div>

            <div class="footer-section">
                <h3>Contact Us</h3>
                <p>üìç Shop 12, Sunrise Avenue</p>
                <p>üìû +91 98765-43210</p>
            </div>

            <div class="footer-section">
                <h3>Quick Links</h3>
                <a href="/">Home</a>
                <a href="/services">Services</a>
                <a href="/bookings">My Bookings</a>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2026 Mom's Glow & Glamour. All rights reserved.</p>
        </div>
    </footer>
    </body>
</html>